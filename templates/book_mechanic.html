<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Book Mechanic | RoadBuddy</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='book_mechanic.css') }}">
</head>

<body>
  <div class="booking-container">
    <h1>Book a Mechanic</h1>

    <!-- âœ… CORRECT FORM (THIS FIXES EVERYTHING) -->
    <form id="bookingForm" method="POST" action="/process_booking">

      <!-- Full Name -->
      <div class="form-group">
        <label for="name">Full Name:</label>
        <input type="text" id="name" name="name" placeholder="Enter your full name" required>
      </div>

      <!-- Phone Number -->
      <div class="form-group">
        <label for="phone">Phone Number:</label>
        <input type="tel" id="phone" name="phone" placeholder="+91XXXXXXXXXX" pattern="\+91[0-9]{10}" required>
      </div>

      <!-- Vehicle Type -->
      <div class="form-group">
        <label for="vehicle">Vehicle Type:</label>
        <select id="vehicle" name="vehicle" required>
          <option value="">-- Select Vehicle --</option>
          <option value="Bike">ğŸï¸ Bike / Scooter</option>
          <option value="Car">ğŸš— Car</option>
          <option value="Truck">ğŸšš Truck / Van</option>
          <option value="EV">âš¡ Electric Vehicle</option>
        </select>
      </div>

      <!-- Address -->
      <div class="form-group">
        <label for="address">Address:</label>
        <div class="address-row">
          <input type="text" id="address" name="address" placeholder="Enter your address manually" required>
          <button type="button" id="detectLocationBtn" class="btn-small">ğŸ“ Get Location</button>
        </div>
      </div>

      <!-- Hidden Coordinates -->
      <input type="hidden" id="lat" name="lat">
      <input type="hidden" id="lng" name="lng">

      <!-- Problem -->
      <div class="form-group">
        <label for="service_type">Select Your Problem:</label>
        <select id="service_type" name="service_type" required>
          <option value="">-- Select Problem Type --</option>

          <optgroup label="ğŸŸ¢ Quick Fix (On-Spot)">
            <option value="Battery Dead">ğŸ”‹ Battery Dead / Jump Start</option>
            <option value="Flat Tyre">ğŸ› Flat Tyre / Puncture</option>
            <option value="Fuel Empty">â›½ Fuel Empty / Refill</option>
            <option value="Minor Electrical">ğŸ’¡ Electrical Issue (light/fuse)</option>
          </optgroup>

          <optgroup label="ğŸŸ¡ Moderate Problems">
            <option value="Clutch Issue">ğŸ§° Clutch Plate Issue</option>
            <option value="Oil Leakage">ğŸ›¢ï¸ Engine Oil Leakage</option>
          </optgroup>

          <optgroup label="ğŸ”´ Major Problems">
            <option value="Engine Seized">âš ï¸ Engine Seized / Not Starting</option>
            <option value="Gearbox Issue">ğŸ’¨ Gearbox Problem</option>
          </optgroup>

        </select>
      </div>

      <!-- Buttons -->
      <div class="button-row">
        <button type="submit" id="bookNowBtn" class="btn-primary">Book Now</button>
        <a href="{{ url_for('index') }}" class="btn-outline">Back to Home</a>
      </div>

    </form>
  </div>

  <script src="{{ url_for('static', filename='book_mechanic.js') }}"></script>
</body>
</html>
